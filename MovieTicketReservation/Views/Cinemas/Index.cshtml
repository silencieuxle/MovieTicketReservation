@using MovieTicketReservation.Models
@model List<Cinema>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/cinema.css" rel="stylesheet" />
<div class="main-content">
    <div class="container">
        <div class="row">
            <!-- BEGIN TEMPLATE -->
            
            <!-- END TEMPLATE -->
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $(".carousel-inner").empty();
        $(".cinema-info").empty();
        $.post("/Cinemas/GetCinemaDetails", { cinemaId: 'CINE1' }, function (data) {
            updateImages(data.Images);
            updateInfo(data);
        }, 'json');
    });

    function updateImages(data) {
        $(".carousel-inner").empty();
        $.each(data, function (index, value) {
            if (index == 0) {
                var imageHtml = "<div class='item active'><img src='" + value + "' alt='' class=''></div>";
            } else {
                var imageHtml = "<div class='item'><img src='" + value + "' alt='' class=''></div>";
            }
            $(".carousel-inner").append(imageHtml)
        });
    }

    function updateInfo(data) {
        $(".cinema-info").empty();
        $(".cinema-info").append('<p class="list-group-item-text">Addr: ' + data.CinemaAddress + '<br>Tel: ' + data.CinemaPhone + '</p>');
    }

    function loadCinemaInfo(cinemaId, source) {
        var target = $('.list-group-item');
        target.removeClass('active');
        $(source).addClass('active');

        $.post("/Cinemas/GetCinemaDetails", { cinemaId: cinemaId }, function (data) {
            updateInfo(data);
            updateImages(data.Images);
        }, 'json');
    }

</script>

