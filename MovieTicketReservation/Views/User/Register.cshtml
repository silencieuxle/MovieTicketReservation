@using MovieTicketReservation.Models
@model UserRegisterModel
@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="row">
        <div class="col-sm-12 col-xs-12">
            <div class="col-panel">
                <div class="col-sm-4">
                    <h3 class="separator">Liên kết nhanh</h3>
                    <a href="/User/ForgetPassword" class="checkbox-list" data-toggle="#location-list"><h4><i class="fa fa-caret-right"></i> Quên mật khẩu</h4></a>
                    <a href="/Ticket/" class="checkbox-list" data-toggle="#location-list"><h4><i class="fa fa-caret-right"></i> Xem vé đã đặt</h4></a>
                </div>
                <div class="col-sm-8">
                    <h3 class="separator">Đăng kí thành viên</h3>
                    @using (Html.BeginForm("Register", "User", FormMethod.Post, new { @class = "form-horizontal" })) {
                        @Html.ValidationSummary()
                        <h4><i class="fa fa-caret-right"></i> Thông tin đăng nhập</h4>
                        <hr />
                        <div class="form-group">
                            @Html.LabelFor(model => model.Email, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.Email, htmlAttributes: new { @class = "form-control" })
                                <label id="emailvalidate" class="validate-label"></label>
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Password, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.Password, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.PasswordRetyped, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.PasswordRetyped, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <br />
                        <h4><i class="fa fa-caret-right"></i> Thông tin cơ bản</h4>
                        <hr />
                        <div class="form-group">
                            @Html.LabelFor(model => model.FirstName, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.FirstName, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.LastName, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.LastName, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <br />
                        <h4><i class="fa fa-caret-right"></i> Thông tin xác thực</h4>
                        <hr />
                        <div class="form-group">
                            @Html.LabelFor(model => model.IdCardNumber, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.IdCardNumber, htmlAttributes: new { @class = "form-control" })
                                <label id="idcardvalidate" class="validate-label"></label>
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Address, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.Address, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.Phone, new { @class = "col-sm-4" })
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.Phone, htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-8">
                                <input id="btnRegister" class="btn btn-primary" style="float: right; margin-left: 10px" type="submit" value="Đăng kí" />
                                @Html.ActionLink("Huỷ bỏ", "Index", "Home", null, new { @class = "btn btn-danger", style = "float: right" })
                            </div>
                        </div>
                    }
                    <script>
                        $("input[name=Email]").blur(function () {
                            var str = $(this).val();
                            $.get("/User/AjaxCheckEmail", { email: str }, function (data) {
                                if (data.Success == false) {
                                    $("#emailvalidate").fadeIn();
                                    $("#emailvalidate").text(data.ErrorMessage);
                                    $("#btnRegister").prop("disabled", true);
                                } else {
                                    $("#emailvalidate").fadeOut();
                                    $("#btnRegister").prop("disabled", false);
                                }
                            });
                        });

                        $("input[name=IdCardNumber]").blur(function () {
                            var str = $(this).val();
                            $.get("/User/AjaxCheckIdCard", { idCardNumber: str }, function (data) {
                                if (data.Success == false) {
                                    $("#idcardvalidate").fadeIn();
                                    $("#idcardvalidate").text(data.ErrorMessage);
                                    $("#btnRegister").prop("disabled", true);
                                } else {
                                    $("#idcardvalidate").fadeOut();
                                    $("#btnRegister").prop("disabled", false);
                                }
                            });
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>
